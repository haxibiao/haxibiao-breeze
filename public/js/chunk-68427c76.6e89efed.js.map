{"version":3,"sources":["webpack:///./src/views/Login.vue?e24f","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?43a1","webpack:///./src/views/Login.vue?a755"],"names":["id","class","href","target","title","activeName","ref","model","formData","rules","label","prop","name","autocomplete","account","placeholder","clearable","maxlength","prefix","password","show-password","toggleForm","sendVerifyCode","to","type","disabled","submitForm","loading","setup","props","context","router","value","signInMutate","signUpMutate","toggleActiveTab","tabName","onError","err","error","onSuccess","res","message","store","commit","USER_LOGIN","setItem","window","location","reload","go","onSignIn","console","log","data","signIn","onSignUp","signUp","computed","this","methods","$refs","loginForm","validate","valid","resetFields","required","trigger","min","max","render","__scopeId"],"mappings":"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","file":"js/chunk-68427c76.6e89efed.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=ba89f73a&lang=scss&scoped=true\"","<template>\n  <Header :title=\"activeName\" />\n  <div id=\"scene-container\" v-loading.fullscreen.lock=\"loading\">\n    <div class=\"content-container\">\n      <el-form ref=\"loginForm\" :model=\"formData\" :rules=\"rules\" class=\"login-form\">\n        <el-form-item label=\"手机号\" prop=\"account\">\n          <el-input\n            name=\"formData-account\"\n            autocomplete\n            class=\"account-input\"\n            v-model=\"formData.account\"\n            placeholder=\"请输入手机号\"\n            clearable\n            maxlength=\"11\"\n          >\n            <template #prefix>\n              +86\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"密&emsp;码\" prop=\"password\">\n          <el-input v-model=\"formData.password\" placeholder=\"请输入密码\" show-password maxlength=\"12\"></el-input>\n        </el-form-item>\n        <div class=\"form-label\">\n          <p class=\"tab-item\" @click=\"toggleForm\">\n            <span class=\"label-btn\">\n              {{ activeName === '登录' ? '没有账号？去注册' : '已有账号！去登录' }}\n            </span>\n          </p>\n          <p class=\"tab-item\" @click=\"sendVerifyCode\">\n            <router-link to=\"/getpass\">忘记密码?</router-link>\n          </p>\n        </div>\n        <el-form-item class=\"button-wrap\">\n          <el-button type=\"primary\" :disabled=\"disabled\" @click=\"submitForm\" class=\"submit-button\">\n            {{ activeName }}\n          </el-button>\n        </el-form-item>\n      </el-form>\n      <p class=\"agreement\">\n        登录即表示已阅读并同意\n        <a class=\"link-text\" href=\"/userProtocol\" target=\"_blank\">《用户协议》</a> 和\n        <a class=\"link-text\" href=\"/privacyPolicy\" target=\"_blank\">《隐私政策》</a>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { exceptionCapture, errorMessage } from '@/common';\nimport { useSignInMutation, useSignUpMutation } from '@/graphql';\nimport store, { Storage, TYPES } from '@/store';\n\nexport default defineComponent({\n  setup(props, context) {\n    const router = useRouter();\n    const activeName = ref('登录');\n    const loading = ref(false);\n    const formData = ref({ account: '', password: '' });\n    const { signInMutate } = useSignInMutation(formData.value);\n    const { signUpMutate } = useSignUpMutation(formData.value);\n\n    function toggleActiveTab() {\n      const tabName = activeName.value === '登录' ? '注册' : '登录';\n      activeName.value = tabName;\n    }\n\n    function onError(err) {\n      ElMessage.error(`${activeName.value}出错：${errorMessage(err)}`);\n    }\n\n    function onSuccess(res) {\n      ElMessage({\n        message: `${activeName.value}成功!`,\n        type: 'success'\n      });\n      store.commit(TYPES.USER_LOGIN, res);\n      Storage.setItem('user', res);\n      window.location.reload();\n      router.go(-1);\n    }\n\n    async function onSignIn() {\n      loading.value = true;\n      const [err, res] = await exceptionCapture(() => signInMutate());\n      loading.value = false;\n      if (err) {\n        console.log('signIn err', err);\n        onError(err);\n      } else if (res?.data.signIn) {\n        onSuccess(res?.data.signIn);\n      }\n    }\n\n    async function onSignUp() {\n      loading.value = true;\n      const [err, res] = await exceptionCapture(() => signUpMutate());\n      loading.value = false;\n      if (err) {\n        onError(err);\n      } else if (res?.data.signUp) {\n        onSuccess(res?.data.signUp);\n      }\n    }\n\n    return {\n      activeName,\n      toggleActiveTab,\n      loading,\n      formData,\n      onSignIn,\n      onSignUp\n    };\n  },\n  computed: {\n    disabled() {\n      return !this.formData.account || !this.formData.password;\n    }\n  },\n  methods: {\n    submitForm() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          if (this.activeName === '登录') {\n            this.onSignIn();\n          } else {\n            this.onSignUp();\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    toggleForm() {\n      this.$refs.loginForm.resetFields();\n      this.toggleActiveTab();\n    }\n  },\n  data() {\n    return {\n      rules: {\n        account: [\n          {\n            required: true,\n            message: '请输入手机号',\n            trigger: 'blur'\n          },\n          {\n            min: 11,\n            message: '手机号长度不正确',\n            trigger: 'blur'\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 12,\n            message: '密码格式不正确（6-12）位',\n            trigger: 'blur'\n          }\n        ]\n      }\n    };\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.content-container {\n  margin: 0 auto;\n  max-width: 428px;\n  padding: 25px 20px 0;\n  position: relative;\n  --el-dialog-padding-primary: 10px;\n  :deep(.login-form) {\n    .el-input {\n      .el-input__inner {\n        height: 48px;\n        line-height: 48px;\n        border: none;\n        background-color: #f8f9fd;\n      }\n      &.account-input {\n        .el-input__inner {\n          padding-left: 60px;\n        }\n        .el-input__prefix {\n          left: 0;\n          margin-top: 10px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 50px;\n          height: 30px;\n          font-size: 14px;\n          color: #222;\n          border-right: 1px solid var(--theme-static-border-color);\n        }\n      }\n      .el-input__icon {\n        width: 30px;\n        line-height: 48px;\n      }\n    }\n  }\n}\n\n.form-label {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 30px;\n  .tab-item {\n    font-size: 1.4rem;\n    line-height: 2rem;\n    color: '#999';\n    cursor: pointer;\n    .label-btn {\n      color: #4bb5ff;\n    }\n  }\n}\n\n.submit-button {\n  width: 100%;\n  height: 44px;\n  font-size: 1.6rem;\n  font-weight: 400;\n}\n\n.agreement {\n  color: #999;\n  font-size: 1.4rem;\n  line-height: 2rem;\n  margin-top: 30px;\n  .link-text {\n    color: $theme-color_primary;\n  }\n}\n</style>\n","\nimport { defineComponent, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { exceptionCapture, errorMessage } from '@/common';\nimport { useSignInMutation, useSignUpMutation } from '@/graphql';\nimport store, { Storage, TYPES } from '@/store';\n\nexport default defineComponent({\n  setup(props, context) {\n    const router = useRouter();\n    const activeName = ref('登录');\n    const loading = ref(false);\n    const formData = ref({ account: '', password: '' });\n    const { signInMutate } = useSignInMutation(formData.value);\n    const { signUpMutate } = useSignUpMutation(formData.value);\n\n    function toggleActiveTab() {\n      const tabName = activeName.value === '登录' ? '注册' : '登录';\n      activeName.value = tabName;\n    }\n\n    function onError(err) {\n      ElMessage.error(`${activeName.value}出错：${errorMessage(err)}`);\n    }\n\n    function onSuccess(res) {\n      ElMessage({\n        message: `${activeName.value}成功!`,\n        type: 'success'\n      });\n      store.commit(TYPES.USER_LOGIN, res);\n      Storage.setItem('user', res);\n      window.location.reload();\n      router.go(-1);\n    }\n\n    async function onSignIn() {\n      loading.value = true;\n      const [err, res] = await exceptionCapture(() => signInMutate());\n      loading.value = false;\n      if (err) {\n        console.log('signIn err', err);\n        onError(err);\n      } else if (res?.data.signIn) {\n        onSuccess(res?.data.signIn);\n      }\n    }\n\n    async function onSignUp() {\n      loading.value = true;\n      const [err, res] = await exceptionCapture(() => signUpMutate());\n      loading.value = false;\n      if (err) {\n        onError(err);\n      } else if (res?.data.signUp) {\n        onSuccess(res?.data.signUp);\n      }\n    }\n\n    return {\n      activeName,\n      toggleActiveTab,\n      loading,\n      formData,\n      onSignIn,\n      onSignUp\n    };\n  },\n  computed: {\n    disabled() {\n      return !this.formData.account || !this.formData.password;\n    }\n  },\n  methods: {\n    submitForm() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          if (this.activeName === '登录') {\n            this.onSignIn();\n          } else {\n            this.onSignUp();\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    toggleForm() {\n      this.$refs.loginForm.resetFields();\n      this.toggleActiveTab();\n    }\n  },\n  data() {\n    return {\n      rules: {\n        account: [\n          {\n            required: true,\n            message: '请输入手机号',\n            trigger: 'blur'\n          },\n          {\n            min: 11,\n            message: '手机号长度不正确',\n            trigger: 'blur'\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 12,\n            message: '密码格式不正确（6-12）位',\n            trigger: 'blur'\n          }\n        ]\n      }\n    };\n  }\n});\n","import { render } from \"./Login.vue?vue&type=template&id=ba89f73a&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=ba89f73a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ba89f73a\"\n\nexport default script"],"sourceRoot":""}
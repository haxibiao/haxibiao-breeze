{"version":3,"sources":["webpack:///./src/components/SearchMovieItem.vue?59a3","webpack:///./src/views/Search.vue","webpack:///./src/components/SearchMovieItem.vue","webpack:///./src/components/SearchMovieItem.vue?9442","webpack:///./src/components/SearchMovieItem.vue?0a5d","webpack:///./src/views/Search.vue?be8d","webpack:///./src/views/Search.vue?b0f2","webpack:///./src/views/Search.vue?8aff","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./node_modules/core-js/modules/es.string.small.js","webpack:///./src/views/Search.vue?84ee"],"names":["id","class","searchLogs","length","item","index","key","to","name","loading","type","count","searchMovies","movie","imageSize","keyword","total","background","page-size","small","paginationAttr","pager-count","pager_count","layout","hide-on-single-page","onCurrentChange","t","viewBox","version","xmlns","p-id","d","href","title","src","cover","count_series","score","producer","actors","introduction","favorited","favoriteHandler","props","Object","setup","movieData","value","isSeries","fetchPolicy","toggleFavorite","onDone","data","render","__scopeId","components","SearchBar","SearchMovieItem","Skeleton","Empty","query","currentPage","page","enabled","prevValue","computed","screen","width","requireObjectCoercible","toString","quot","module","exports","string","tag","attribute","S","p1","replace","fails","METHOD_NAME","test","toLowerCase","split","$","createHTML","forcedStringHTMLMethod","target","proto","forced","this"],"mappings":"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","file":"js/chunk-9df6817a.25980e7b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./SearchMovieItem.vue?vue&type=style&index=0&id=18e03f1a&lang=scss&scoped=true\"","<template>\n  <Masthead />\n  <div id=\"scene-container\">\n    <div class=\"fluid-content\">\n      <div class=\"search-container\">\n        <div class=\"top-searchbar show-lg\">\n          <SearchBar />\n        </div>\n        <div class=\"hot-search\">\n          <div class=\"pannel-title\">\n            <h4>热门搜索</h4>\n          </div>\n          <ul class=\"pannel-hotlist\" v-if=\"searchLogs.length > 0\">\n            <li class=\"hot-item\" v-for=\"(item, index) in searchLogs\" :key=\"item.id\">\n              <router-link :to=\"`/search?keyword=${item.name}`\">\n                <em class=\"i-box\">{{ index + 1 }}</em> {{ item.name }}\n              </router-link>\n            </li>\n          </ul>\n        </div>\n        <div class=\"main-content\">\n          <div class=\"search-result\">\n            <Skeleton v-if=\"loading\" type=\"movies\" :count=\"4\" />\n            <template v-else-if=\"searchMovies.length > 0\" v-for=\"movie in searchMovies\" :key=\"movie.id\">\n              <SearchMovieItem v-if=\"movie?.id\" :movie=\"movie\" />\n            </template>\n            <Empty v-else type=\"content\" imageSize=\"30%\">\n              <p v-if=\"keyword\" class=\"empty-description\">\n                抱歉，没有找到“ <em class=\"keyword\">{{ keyword }}</em> ”的相关视频\n              </p>\n              <p v-else class=\"empty-description\">\n                输入关键词搜索相关视频\n              </p>\n            </Empty>\n          </div>\n          <div v-if=\"total > 10\" class=\"pagination-wrap\">\n            <el-pagination\n              background\n              :page-size=\"10\"\n              :small=\"paginationAttr.small\"\n              :total=\"total\"\n              :pager-count=\"paginationAttr.pager_count\"\n              layout=\"prev, pager, next\"\n              :hide-on-single-page=\"true\"\n              @current-change=\"onCurrentChange\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Footer />\n  <SideBar />\n</template>\n\n<script lang=\"ts\">\nimport { ref, watch, onMounted, reactive, toRefs } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useSearchLogsQuery, useSearchMoviesQuery } from '@/graphql';\nimport store, { Storage, TYPES } from '@/store';\nimport { exceptionCapture } from '@/common';\nimport SearchMovieItem from '@/components/SearchMovieItem.vue';\nimport SearchBar from '@/components/SearchBar.vue';\nimport Skeleton from '@/components/Skeleton.vue';\nimport Empty from '@/components/Empty.vue';\n\nexport default {\n  name: 'Search',\n  components: { SearchBar, SearchMovieItem, Skeleton, Empty },\n  props: ['query'],\n  setup(props) {\n    const { query } = toRefs(props);\n    const keyword = ref(query.value?.keyword || '');\n\n    const currentPage = ref(1);\n    const { searchLogs } = useSearchLogsQuery();\n    const { loading, searchMovies, total } = useSearchMoviesQuery(\n      {\n        keyword,\n        page: currentPage\n      },\n      { fetchPolicy: 'network-only', enabled: keyword.value }\n    );\n\n    function onCurrentChange(page: number) {\n      currentPage.value = page;\n    }\n\n    watch(query, (value, prevValue) => {\n      keyword.value = value?.keyword;\n    });\n\n    return {\n      keyword,\n      loading,\n      total,\n      searchLogs,\n      searchMovies,\n      onCurrentChange\n    };\n  },\n  computed: {\n    paginationAttr() {\n      if (screen.width < 576) {\n        return { pager_count: 5, small: true };\n      } else {\n        return { pager_count: 9, small: false };\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$colors: #ff4a6a, #ff5c38, #ffb826, #7f7f8c;\n\n.search-container {\n  margin-top: var(--content-margin);\n  width: 100%;\n  min-height: 100vh;\n  padding-right: 25%;\n  position: relative;\n  @media screen and (max-width: $col-lg-width - 1px) {\n    padding-right: 0;\n    .hot-search {\n      position: relative;\n      width: 100%;\n      .pannel-hotlist {\n        display: flex;\n        flex-wrap: wrap;\n        .hot-item {\n          width: 50%;\n          font-size: 14px;\n          line-height: 30px;\n          .i-box {\n            font-size: 16px;\n          }\n        }\n      }\n    }\n    .main-content {\n      margin-top: var(--content-margin);\n      margin-right: 0;\n    }\n  }\n}\n\n.hot-search {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 25%;\n  .pannel-title {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    h4 {\n      font-size: 18px;\n      font-weight: bold;\n      color: $theme-color_secondary;\n    }\n  }\n  .pannel-hotlist {\n    .hot-item {\n      font-size: 16px;\n      line-height: 40px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      .i-box {\n        margin-right: 10px;\n        font-size: 20px;\n        font-weight: bold;\n        color: nth($colors, 4);\n      }\n      @for $i from 1 through 3 {\n        &:nth-of-type(#{$i}) {\n          .i-box {\n            color: nth($colors, $i);\n            letter-spacing: 0;\n          }\n        }\n      }\n    }\n  }\n}\n\n.main-content {\n  margin-right: var(--content-margin);\n}\n\n.empty-description {\n  font-size: 16px;\n  font-weight: 400;\n  color: var(--theme-text-secondary);\n  .keyword {\n    color: $theme-color_secondary;\n  }\n}\n\n.pagination-wrap {\n  display: flex;\n  justify-content: center;\n  padding: var(--content-margin) 0;\n  overflow: hidden;\n}\n</style>\n\n<style lang=\"scss\">\n.top-searchbar {\n  #search-bar {\n    margin-bottom: 20px;\n    display: flex;\n    overflow: hidden;\n  }\n}\n</style>\n","<template>\n  <div class=\"movie-card-item\">\n    <a class=\"card-figure\" :href=\"`/movie/${movie.id}`\" :title=\"movie?.name\">\n      <div class=\"cover-wapper\">\n        <img class=\"movie-cover\" :src=\"movie?.cover\" />\n        <div class=\"video-tag\">\n          <div :class=\"['content-pack-tag', movie.count_series > 1 ? 'tag-blue' : 'tag-red']\">\n            {{ movie.count_series > 1 ? '电视剧' : '电影' }}\n          </div>\n        </div>\n        <div v-if=\"movie.score\" class=\"video-status\">\n          <span v-if=\"movie.count_series > 2\" class=\"video-duration hide-xs\">{{ movie.count_series }}集全</span>\n          <span v-if=\"movie.score\" class=\"movie-score\">{{ movie.score }}</span>\n        </div>\n      </div>\n    </a>\n    <div class=\"card-detail\">\n      <div class=\"info-wapper\">\n        <h2 class=\"movie-title\">\n          <a class=\"movie-name\" :href=\"`/movie/${movie?.id}`\">\n            <span>{{ movie?.name }}</span>\n          </a>\n        </h2>\n\n        <div class=\"movie-info\">\n          <div class=\"info-item hide-sm\" v-if=\"!!movie?.producer\">\n            <span class=\"label\">导&nbsp;&nbsp;演：</span>\n            <span class=\"label content\">\n              <span>{{ movie?.producer }}</span>\n            </span>\n          </div>\n          <div class=\"info-item hide-sm\" v-if=\"!!movie?.actors\">\n            <span class=\"label\">主&nbsp;&nbsp;演：</span>\n            <span class=\"label content\">\n              {{ movie?.actors }}\n            </span>\n          </div>\n          <div class=\"info-item info-item-desc\" v-if=\"!!movie?.introduction\">\n            <span class=\"label\">简&nbsp;&nbsp;介：</span>\n            <span class=\"desc-text\">\n              {{ movie?.introduction }}\n              <a class=\"desc-more\" :href=\"`/movie/${movie?.id}`\"> 详细<i class=\"el-icon-arrow-right\"></i> </a>\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"movie-operation\">\n        <a class=\"op-button play\" :href=\"`/movie/${movie?.id}`\">\n          立即播放\n        </a>\n        <div :class=\"['op-button', movie?.favorited ? 'favorited' : 'unfavorite']\" v-auth:click=\"favoriteHandler\">\n          <svg\n            v-if=\"!movie?.favorited\"\n            t=\"1632905874356\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            p-id=\"40911\"\n          >\n            <path\n              d=\"M720.398507 959.573333c73.045333 31.317333 136.96-15.317333 129.706666-94.293333l-20.650666-226.218667 174.634666-199.722666c38.144-43.648 19.2-102.229333-37.418666-115.114667l-258.474667-58.794667-135.68-228.010666c-29.738667-49.877333-91.306667-49.92-121.045333 0L315.74784 265.429333 57.273173 324.224C0.953173 337.066667-18.33216 395.648 19.854507 439.338667l174.634666 199.722666-24.021333 264.405334c-5.248 57.770667 44.544 94.037333 97.877333 71.125333l243.626667-104.533333 208.426667 89.472z\"\n              p-id=\"40912\"\n            ></path>\n          </svg>\n          {{ movie?.favorited ? '已追剧' : '追剧' }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, toRefs } from 'vue';\nimport { debounce } from 'lodash';\nimport { MovieItemInterface } from '@/graphql/schema';\nimport { useFavoriteMutation } from '@/graphql';\n\nexport default {\n  name: 'SearchMovieItem',\n  props: {\n    movie: Object as () => MovieItemInterface\n  },\n  setup(props) {\n    const { movie: movieData } = toRefs(props);\n    const movie = ref({ ...movieData.value });\n    const isSeries = ref(movie.value?.count_series > 1);\n\n    const { toggleFavorite, onDone } = useFavoriteMutation(\n      {\n        id: movie.value.id,\n        type: 'movies'\n      },\n      { fetchPolicy: 'network-only' }\n    );\n\n    onDone(({ data }) => {\n      if (data) {\n        movie.value.favorited = data?.toggleFavorite?.favorited;\n      }\n    });\n\n    const favoriteHandler = debounce(() => {\n      movie.value.favorited = !movie.value.favorited;\n      toggleFavorite();\n    }, 500);\n\n    return {\n      movie,\n      isSeries,\n      favoriteHandler\n    };\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.movie-card-item {\n  display: flex;\n  position: relative;\n  margin-bottom: 28px;\n  @media screen and (max-width: $col-sm-width - 1px) {\n    margin-bottom: 14px;\n    .card-figure {\n      position: relative;\n      .cover-wapper {\n        width: 90px;\n        height: 120px;\n      }\n    }\n    .card-detail {\n      .movie-title {\n        .movie-name {\n          font-size: 15px;\n        }\n      }\n      .movie-info {\n        .info-item {\n          font-size: 13px;\n        }\n      }\n    }\n    .movie-operation {\n      .op-button {\n        padding: 0 10px;\n        min-width: 78px;\n        height: 32px;\n        font-size: 13px;\n        .icon {\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n  }\n}\n\n.card-figure {\n  position: relative;\n  .cover-wapper {\n    width: 154px;\n    height: 214px;\n    border-radius: 8px;\n    overflow: hidden;\n    position: relative;\n    .movie-cover {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      background: #f8f8f8;\n      transition: box-shadow 0.5s ease-out;\n      &:hover {\n        box-shadow: 0 0 7px rgb(0 0 0 / 30%);\n      }\n    }\n  }\n  .video-tag {\n    position: absolute;\n    right: 0;\n    top: 0;\n    font-size: 12px;\n    line-height: 18px;\n    color: #fff;\n    z-index: 15;\n  }\n  .video-status {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    padding: 5px 10px;\n    background-repeat: no-repeat;\n    background-image: linear-gradient(transparent, rgba(0, 0, 0, 0.5));\n    display: flex;\n    justify-content: space-between;\n    .video-duration {\n      font-size: 12px;\n      font-weight: 500;\n      line-height: 1.4rem;\n      color: var(--theme-static-brand-white);\n      overflow: hidden;\n    }\n    .movie-score {\n      float: right;\n      font-size: 18px;\n      font-weight: 700;\n      line-height: 1.8rem;\n      color: $theme-color_secondary;\n      overflow: hidden;\n    }\n  }\n}\n\n.card-detail {\n  margin-left: 14px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  overflow: hidden;\n  .movie-title {\n    display: flex;\n    .movie-name {\n      flex: 1;\n      display: block;\n      font-size: 18px;\n      font-weight: 500;\n      color: var(--theme-text-primary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n  .movie-info {\n    .info-item {\n      margin-top: 10px;\n      font-size: 14px;\n      line-height: 20px;\n      color: var(--theme-text-tertiary);\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      &.info-item-desc {\n        max-width: 100%;\n        line-height: 18px;\n        white-space: normal;\n        .label {\n          float: left;\n        }\n        .desc-text {\n          display: block;\n          margin-top: -1px;\n          font-size: 14px;\n          line-height: 20px;\n          max-height: 40px;\n          position: relative;\n        }\n        .desc-more {\n          position: absolute;\n          right: 0;\n          top: 20px;\n          padding-left: 30px;\n          color: var(--theme-text-primary);\n          background: linear-gradient(90deg, rgba(255, 255, 255, 0.2) 0, #fff 20px);\n          cursor: pointer;\n        }\n      }\n      .content {\n        color: var(--theme-text-primary);\n      }\n    }\n  }\n}\n\n.movie-operation {\n  margin-top: 10px;\n  display: flex;\n  .op-button {\n    margin-right: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 18px;\n    min-width: 90px;\n    height: 36px;\n    font-size: 14px;\n    font-weight: bold;\n    color: var(--theme-text-primary);\n    border-radius: 5px;\n    cursor: pointer;\n    .icon {\n      margin-right: 6px;\n      margin-top: -2px;\n      width: 18px;\n      height: 18px;\n      fill: #fff;\n    }\n    &.play {\n      color: #fff;\n      background: linear-gradient(to right, $theme-color_primary 0, $theme-color_secondary 100%);\n      box-shadow: 0 5px 10px rgba($theme-color_primary, 0.25);\n    }\n    &.favorited {\n      color: var(--theme-text-secondary);\n      background: linear-gradient(to right, #eeeeee 0, #f6f6f6 100%);\n      box-shadow: 0 5px 10px rgba(246, 246, 246, 0.25);\n    }\n    &.unfavorite {\n      color: #fff;\n      background: linear-gradient(to right, #ff477e 0, #ff7e5f 100%);\n      box-shadow: 0 5px 10px rgba(#ff7e5f, 0.25);\n      .icon {\n        fill: #fff;\n      }\n    }\n  }\n}\n</style>\n","\nimport { ref, toRefs } from 'vue';\nimport { debounce } from 'lodash';\nimport { MovieItemInterface } from '@/graphql/schema';\nimport { useFavoriteMutation } from '@/graphql';\n\nexport default {\n  name: 'SearchMovieItem',\n  props: {\n    movie: Object as () => MovieItemInterface\n  },\n  setup(props) {\n    const { movie: movieData } = toRefs(props);\n    const movie = ref({ ...movieData.value });\n    const isSeries = ref(movie.value?.count_series > 1);\n\n    const { toggleFavorite, onDone } = useFavoriteMutation(\n      {\n        id: movie.value.id,\n        type: 'movies'\n      },\n      { fetchPolicy: 'network-only' }\n    );\n\n    onDone(({ data }) => {\n      if (data) {\n        movie.value.favorited = data?.toggleFavorite?.favorited;\n      }\n    });\n\n    const favoriteHandler = debounce(() => {\n      movie.value.favorited = !movie.value.favorited;\n      toggleFavorite();\n    }, 500);\n\n    return {\n      movie,\n      isSeries,\n      favoriteHandler\n    };\n  }\n};\n","import { render } from \"./SearchMovieItem.vue?vue&type=template&id=18e03f1a&scoped=true\"\nimport script from \"./SearchMovieItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchMovieItem.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchMovieItem.vue?vue&type=style&index=0&id=18e03f1a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-18e03f1a\"\n\nexport default script","\nimport { ref, watch, onMounted, reactive, toRefs } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useSearchLogsQuery, useSearchMoviesQuery } from '@/graphql';\nimport store, { Storage, TYPES } from '@/store';\nimport { exceptionCapture } from '@/common';\nimport SearchMovieItem from '@/components/SearchMovieItem.vue';\nimport SearchBar from '@/components/SearchBar.vue';\nimport Skeleton from '@/components/Skeleton.vue';\nimport Empty from '@/components/Empty.vue';\n\nexport default {\n  name: 'Search',\n  components: { SearchBar, SearchMovieItem, Skeleton, Empty },\n  props: ['query'],\n  setup(props) {\n    const { query } = toRefs(props);\n    const keyword = ref(query.value?.keyword || '');\n\n    const currentPage = ref(1);\n    const { searchLogs } = useSearchLogsQuery();\n    const { loading, searchMovies, total } = useSearchMoviesQuery(\n      {\n        keyword,\n        page: currentPage\n      },\n      { fetchPolicy: 'network-only', enabled: keyword.value }\n    );\n\n    function onCurrentChange(page: number) {\n      currentPage.value = page;\n    }\n\n    watch(query, (value, prevValue) => {\n      keyword.value = value?.keyword;\n    });\n\n    return {\n      keyword,\n      loading,\n      total,\n      searchLogs,\n      searchMovies,\n      onCurrentChange\n    };\n  },\n  computed: {\n    paginationAttr() {\n      if (screen.width < 576) {\n        return { pager_count: 5, small: true };\n      } else {\n        return { pager_count: 9, small: false };\n      }\n    }\n  }\n};\n","import { render } from \"./Search.vue?vue&type=template&id=0a11edea&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=ts\"\nexport * from \"./Search.vue?vue&type=script&lang=ts\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=0a11edea&lang=scss&scoped=true\"\nimport \"./Search.vue?vue&type=style&index=1&id=0a11edea&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0a11edea\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=1&id=0a11edea&lang=scss\"","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + toString(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.small` method\n// https://tc39.es/ecma262/#sec-string.prototype.small\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('small') }, {\n  small: function small() {\n    return createHTML(this, 'small', '', '');\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=0&id=0a11edea&lang=scss&scoped=true\""],"sourceRoot":""}